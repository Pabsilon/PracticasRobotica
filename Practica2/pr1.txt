PROGRAM PARP
LABEL 3
	SET OUT[4] = 1
	DELAY 50
	SET OUT[4] = 0
	DELAY 50
	GOTO 3
END

PROGRAM BOT1
	GLOBAL SEM
	DEFINE AUX
LABEL 1
	PRINTLN "A la espera de que se coloque algo en el boton 1"
	WAIT IN[2]=1
	PEND AUX FROM SEM
	POST 0 TO SEM
	IF IN[2] = 0
		PRINTLN "Object has been removed from button"
		GOTO 1
	ENDIF
	
	RUN PARP
	MOVED 0
	SPEED 50
	MOVED 1
	SPEED 10
	OPEN
	MOVED 2
	CLOSE
	IF ENC[6] > -100
		PRINTLN "Whoooops..."
		OUT[1]=1
		SPEED 30
		DELAY 200
		OUT[1]=0
		MOVED 0
		STOP PARP
		POST 1 TO SEM
		GOTO 1
	SPEED 30
	MOVED 3
	SPEED 10
	MOVED 4
	OPEN
	MOVED 0
	STOP PARP
	SET OUT[4] = 1
	POST 1 TO SEM
	GOTO 1
END

PROGRAM BOT2
	GLOBAL SEM
	DEFINE AUX
LABEL 2
	PRINTLN "A la espera de que se coloque algo en el boton 1"
	WAIT IN[3]=1
	PEND AUX FROM SEM
	POST 0 TO SEM
		IF IN[3] = 0
		PRINTLN "Object has been removed from button"
		GOTO 2
	ENDIF
	RUN PARP
	MOVED 0
	SPEED 50
	MOVED 5
	SPEED 10
	OPEN
	MOVED 6
	CLOSE
	IF ENC[6] > -100
		PRINTLN "Whoooops..."
		OUT[1]=1
		SPEED 30
		DELAY 200
		OUT[1]=0
		MOVED 0
		STOP PARP
		POST 1 TO SEM
		GOTO 2
	SPEED 30
	MOVED 8
	SPEED 10
	MOVED 7
	OPEN
	SPEED 30
	MOVED 0
	STOP PARP
	SET OUT[4] = 1
	POST 1 TO SEM
	GOTO 2
END

PROGRAM MAIN
	GLOBAL SEM
	DEFINE VAR
LABEL 4
	SET SEM = 1
	RUN BOT1
	RUN BOT2
END
